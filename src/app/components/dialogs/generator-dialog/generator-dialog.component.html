<div
  class="h-full flex flex-col [&:not(:last-child)]:!hidden bg-[var(--p-primary-850)] overflow-hidden"
>
  @if (generator()) {
    <div
      class="w-full p-4 gap-3 flex flex-col shrink-0 [border-bottom:1px_solid_var(--p-surface-700)] bg-[var(--p-primary-800)]"
    >
      <div
        class="flex gap-3"
      >
        @if (generator().avatar) {
          <p-avatar
            [image]="generator().avatar"
            size="xlarge"
            class="!h-14 !w-14 rounded-md overflow-hidden shrink-0"
          />
        } @else {
          <p-avatar
            icon="pi pi-hashtag"
            size="xlarge"
            class="!h-14 !w-14 rounded-md overflow-hidden shrink-0"
          />
        }

        <div
          class="flex flex-col h-full justify-center grow"
        >
          <span
            class="text-2xl font-medium"
          >{{generator().displayName}}</span>

          <span
            class="text-sm text-primary-400"
          >Created by
            <a
              class="hover:underline cursor-pointer"
            >{{generator().creator | displayName}}</a>
            Â· Liked by
            <a
              class="hover:underline cursor-pointer"
            >{{generator().likeCount}} users</a>
          </span>
        </div>

        <button
          pButton pRipple text
          class="!h-8 !w-8 !p-0 shrink-0"
          (click)="dialog.close()"
        >
          <i
            class="pi pi-times !text-xl"
          ></i>
        </button>
      </div>

      <rich-text
        [text]="generator().description"
        [facets]="generator().descriptionFacets"
        class="text-sm"
      />

      <div
        class="flex gap-4"
      >
        <button
          pButton pRipple outlined
          class="!p-2 flex-1"
          (click)="generator().viewer.like ? unlike() : like()"
        >
          @if (generator().viewer.like) {
            <i
              class="pi pi-heart-fill text-red-600 !text-sm"
            ></i>
            <span
              class="text-sm font-medium [text-box:trim-both_cap_alphabetic]"
            >Unlike</span>
          } @else {
            <i
              class="pi pi-heart !text-sm"
            ></i>
            <span
              class="text-sm font-medium [text-box:trim-both_cap_alphabetic]"
            >Like</span>
          }
        </button>

        <button
          pButton pRipple outlined
          class="!p-2 flex-1"
          (click)="addAsColumn()"
        >
          <i
            class="pi pi-plus !text-sm"
          ></i>
          <span
            class="text-sm font-medium [text-box:trim-both_cap_alphabetic]"
          >Add as column</span>
        </button>

        <button
          pButton pRipple outlined
          class="!p-2 flex-1"
        >
          <i
            class="pi pi-upload !text-sm"
          ></i>
          <span
            class="text-sm font-medium [text-box:trim-both_cap_alphabetic]"
          >Share</span>
        </button>
      </div>
    </div>

    <generator-feed
      [uri]="generator().uri"
      class="block flex-1 min-h-0"
    />
  } @else {
    <div
      class="h-full w-full flex items-center justify-center"
    >
      <p-progress-spinner
        class="h-12"
        strokeWidth="5"
        [style]="{height: '3rem', width: '3rem'}"
      />
    </div>
  }
</div>
